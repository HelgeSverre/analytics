!function(e){Analytics.EcommerceWidget=Garnish.Base.extend({settings:null,requestData:null,$chart:null,init:function(t,s){this.setSettings(s,Analytics.EcommerceWidget.defaults),this.$element=e("#"+t),this.$body=e(".body",this.$element),this.$spinner=e(".spinner",this.$element),this.$spinner.removeClass("body-loading"),this.$error=e('<div class="error" />').appendTo(this.$body),this.$period=e(".period",this.$element),this.$revenue=e(".revenue",this.$element),this.$revenuePerTransaction=e(".revenue-per-transaction",this.$element),this.$transactions=e(".transactions",this.$element),this.$transactionsPerSession=e(".transactions-per-session",this.$element),this.$chart=e(".chart",this.$element),this.sendRequest()},sendRequest:function(){this.$spinner.removeClass("hidden"),this.$error.addClass("hidden");var t={viewId:this.settings.viewId,period:this.settings.period};Craft.postActionRequest("analytics/reports/ecommerce-widget",t,e.proxy(function(e,t){if(this.$spinner.addClass("hidden"),"success"==t&&void 0===e.error)this.parseResponse(e);else{var s="An unknown error occured.";void 0!==e&&e&&void 0!==e.error&&(s=e.error),this.$error.html(s),this.$error.removeClass("hidden")}},this))},parseResponse:function(e){this.$period.html(e.period),this.$revenue.html(e.totalRevenue),this.$revenuePerTransaction.html(e.totalRevenuePerTransaction),this.$transactions.html(e.totalTransactions),this.$transactionsPerSession.html(e.totalTransactionsPerSession),this.chart=new Analytics.reports.Area(this.$chart,e.reportData,this.settings.localeDefinition,this.settings.chartLanguage)}},{defaults:{viewId:null,period:null,localeDefinition:null,chartLanguage:null}})}(jQuery);